!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):(global=global||self).Lenis=factory()}(this,(function(){function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}function clamp(min,input,max){return Math.max(min,Math.min(input,max))}var Animate=function(){function Animate(){}var _proto=Animate.prototype;return _proto.advance=function(deltaTime){var _this$onUpdate;if(this.isRunning){var x,y,lambda,dt,completed=!1;if(this.lerp)this.value=(x=this.value,y=this.to,lambda=60*this.lerp,dt=deltaTime,function(x,y,t){return(1-t)*x+t*y}(x,y,1-Math.exp(-lambda*dt))),Math.round(this.value)===this.to&&(this.value=this.to,completed=!0);else{this.currentTime+=deltaTime;var linearProgress=clamp(0,this.currentTime/this.duration,1),easedProgress=(completed=linearProgress>=1)?1:this.easing(linearProgress);this.value=this.from+(this.to-this.from)*easedProgress}null==(_this$onUpdate=this.onUpdate)||_this$onUpdate.call(this,this.value,completed),completed&&this.stop()}},_proto.stop=function(){this.isRunning=!1},_proto.fromTo=function(from,to,_ref){var _ref$lerp=_ref.lerp,lerp=void 0===_ref$lerp?.1:_ref$lerp,_ref$duration=_ref.duration,duration=void 0===_ref$duration?1:_ref$duration,_ref$easing=_ref.easing,easing=void 0===_ref$easing?function(t){return t}:_ref$easing,onStart=_ref.onStart,onUpdate=_ref.onUpdate;this.from=this.value=from,this.to=to,this.lerp=lerp,this.duration=duration,this.easing=easing,this.currentTime=0,this.isRunning=!0,null==onStart||onStart(),this.onUpdate=onUpdate},Animate}();var Dimensions=function(){function Dimensions(_temp){var callback,delay,timer,_this=this,_ref=void 0===_temp?{}:_temp,wrapper=_ref.wrapper,content=_ref.content,_ref$autoResize=_ref.autoResize,autoResize=void 0===_ref$autoResize||_ref$autoResize;if(this.resize=function(){_this.onWrapperResize(),_this.onContentResize()},this.onWrapperResize=function(){_this.wrapper===window?(_this.width=window.innerWidth,_this.height=window.innerHeight):(_this.width=_this.wrapper.clientWidth,_this.height=_this.wrapper.clientHeight)},this.onContentResize=function(){_this.scrollHeight=_this.content.scrollHeight,_this.scrollWidth=_this.content.scrollWidth},this.wrapper=wrapper,this.content=content,autoResize){var resize=(callback=this.resize,delay=250,function(){var args=arguments,context=this;clearTimeout(timer),timer=setTimeout((function(){callback.apply(context,args)}),delay)});this.wrapper!==window&&(this.wrapperResizeObserver=new ResizeObserver(resize),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(resize),this.contentResizeObserver.observe(this.content)}this.resize()}return Dimensions.prototype.destroy=function(){var _this$wrapperResizeOb,_this$contentResizeOb;null==(_this$wrapperResizeOb=this.wrapperResizeObserver)||_this$wrapperResizeOb.disconnect(),null==(_this$contentResizeOb=this.contentResizeObserver)||_this$contentResizeOb.disconnect()},_createClass(Dimensions,[{key:"limit",get:function(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}}]),Dimensions}(),Emitter=function(){function Emitter(){this.events={}}var _proto=Emitter.prototype;return _proto.emit=function(event){for(var callbacks=this.events[event]||[],i=0,length=callbacks.length;i<length;i++)callbacks[i].apply(callbacks,[].slice.call(arguments,1))},_proto.on=function(event,cb){var _this$events$event,_this=this;return(null==(_this$events$event=this.events[event])?void 0:_this$events$event.push(cb))||(this.events[event]=[cb]),function(){var _this$events$event2;_this.events[event]=null==(_this$events$event2=_this.events[event])?void 0:_this$events$event2.filter((function(i){return cb!==i}))}},_proto.off=function(event,callback){var _this$events$event3;this.events[event]=null==(_this$events$event3=this.events[event])?void 0:_this$events$event3.filter((function(i){return callback!==i}))},_proto.destroy=function(){this.events={}},Emitter}(),VirtualScroll=function(){function VirtualScroll(element,_ref){var _this=this,_ref$wheelMultiplier=_ref.wheelMultiplier,wheelMultiplier=void 0===_ref$wheelMultiplier?1:_ref$wheelMultiplier,_ref$touchMultiplier=_ref.touchMultiplier,touchMultiplier=void 0===_ref$touchMultiplier?2:_ref$touchMultiplier,_ref$normalizeWheel=_ref.normalizeWheel,normalizeWheel=void 0!==_ref$normalizeWheel&&_ref$normalizeWheel;this.onTouchStart=function(event){var _ref2=event.targetTouches?event.targetTouches[0]:event,clientX=_ref2.clientX,clientY=_ref2.clientY;_this.touchStart.x=clientX,_this.touchStart.y=clientY,_this.lastDelta={x:0,y:0}},this.onTouchMove=function(event){var _ref3=event.targetTouches?event.targetTouches[0]:event,clientX=_ref3.clientX,clientY=_ref3.clientY,deltaX=-(clientX-_this.touchStart.x)*_this.touchMultiplier,deltaY=-(clientY-_this.touchStart.y)*_this.touchMultiplier;_this.touchStart.x=clientX,_this.touchStart.y=clientY,_this.lastDelta={x:deltaX,y:deltaY},_this.emitter.emit("scroll",{deltaX:deltaX,deltaY:deltaY,event:event})},this.onTouchEnd=function(event){_this.emitter.emit("scroll",{deltaX:_this.lastDelta.x,deltaY:_this.lastDelta.y,event:event})},this.onWheel=function(event){var deltaX=event.deltaX,deltaY=event.deltaY;_this.normalizeWheel&&(deltaX=clamp(-100,deltaX,100),deltaY=clamp(-100,deltaY,100)),deltaX*=_this.wheelMultiplier,deltaY*=_this.wheelMultiplier,_this.emitter.emit("scroll",{deltaX:deltaX,deltaY:deltaY,event:event})},this.element=element,this.wheelMultiplier=wheelMultiplier,this.touchMultiplier=touchMultiplier,this.normalizeWheel=normalizeWheel,this.touchStart={x:null,y:null},this.emitter=new Emitter,this.element.addEventListener("wheel",this.onWheel,{passive:!1}),this.element.addEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.addEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.addEventListener("touchend",this.onTouchEnd,{passive:!1})}var _proto=VirtualScroll.prototype;return _proto.on=function(event,callback){return this.emitter.on(event,callback)},_proto.destroy=function(){this.emitter.destroy(),this.element.removeEventListener("wheel",this.onWheel,{passive:!1}),this.element.removeEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.removeEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.removeEventListener("touchend",this.onTouchEnd,{passive:!1})},VirtualScroll}(),Lenis=function(){function Lenis(_temp){var _this=this,_ref=void 0===_temp?{}:_temp,_ref$wrapper=_ref.wrapper,wrapper=void 0===_ref$wrapper?window:_ref$wrapper,_ref$content=_ref.content,content=void 0===_ref$content?document.documentElement:_ref$content,_ref$wheelEventsTarge=_ref.wheelEventsTarget,wheelEventsTarget=void 0===_ref$wheelEventsTarge?wrapper:_ref$wheelEventsTarge,_ref$eventsTarget=_ref.eventsTarget,eventsTarget=void 0===_ref$eventsTarget?wheelEventsTarget:_ref$eventsTarget,_ref$smoothWheel=_ref.smoothWheel,smoothWheel=void 0===_ref$smoothWheel||_ref$smoothWheel,_ref$smoothTouch=_ref.smoothTouch,smoothTouch=void 0!==_ref$smoothTouch&&_ref$smoothTouch,_ref$syncTouch=_ref.syncTouch,_syncTouch=void 0!==_ref$syncTouch&&_ref$syncTouch,_ref$syncTouchLerp=_ref.syncTouchLerp,syncTouchLerp=void 0===_ref$syncTouchLerp?.1:_ref$syncTouchLerp,_ref$__iosNoInertiaSy=_ref.__iosNoInertiaSyncTouchLerp,__iosNoInertiaSyncTouchLerp=void 0===_ref$__iosNoInertiaSy?.4:_ref$__iosNoInertiaSy,_ref$touchInertiaMult=_ref.touchInertiaMultiplier,touchInertiaMultiplier=void 0===_ref$touchInertiaMult?35:_ref$touchInertiaMult,duration=_ref.duration,_ref$easing=_ref.easing,easing=void 0===_ref$easing?function(t){return Math.min(1,1.001-Math.pow(2,-10*t))}:_ref$easing,_ref$lerp=_ref.lerp,lerp=void 0===_ref$lerp?!duration&&.1:_ref$lerp,_ref$infinite=_ref.infinite,infinite=void 0!==_ref$infinite&&_ref$infinite,_ref$orientation=_ref.orientation,orientation=void 0===_ref$orientation?"vertical":_ref$orientation,_ref$gestureOrientati=_ref.gestureOrientation,gestureOrientation=void 0===_ref$gestureOrientati?"vertical":_ref$gestureOrientati,_ref$touchMultiplier=_ref.touchMultiplier,touchMultiplier=void 0===_ref$touchMultiplier?1:_ref$touchMultiplier,_ref$wheelMultiplier=_ref.wheelMultiplier,wheelMultiplier=void 0===_ref$wheelMultiplier?1:_ref$wheelMultiplier,_ref$normalizeWheel=_ref.normalizeWheel,normalizeWheel=void 0!==_ref$normalizeWheel&&_ref$normalizeWheel,_ref$autoResize=_ref.autoResize,autoResize=void 0===_ref$autoResize||_ref$autoResize;this.onVirtualScroll=function(_ref2){var deltaX=_ref2.deltaX,deltaY=_ref2.deltaY,event=_ref2.event;if(!event.ctrlKey){var isTouch=event.type.includes("touch"),isWheel=event.type.includes("wheel");if(!("both"===_this.options.gestureOrientation&&0===deltaX&&0===deltaY||"vertical"===_this.options.gestureOrientation&&0===deltaY||"horizontal"===_this.options.gestureOrientation&&0===deltaX||isTouch&&"vertical"===_this.options.gestureOrientation&&0===_this.scroll&&!_this.options.infinite&&deltaY<=0)){var composedPath=event.composedPath();if(!(composedPath=composedPath.slice(0,composedPath.indexOf(_this.rootElement))).find((function(node){var _node$classList;return(null==node.hasAttribute?void 0:node.hasAttribute("data-lenis-prevent"))||isTouch&&(null==node.hasAttribute?void 0:node.hasAttribute("data-lenis-prevent-touch"))||isWheel&&(null==node.hasAttribute?void 0:node.hasAttribute("data-lenis-prevent-wheel"))||(null==(_node$classList=node.classList)?void 0:_node$classList.contains("lenis"))})))if(_this.isStopped||_this.isLocked)event.preventDefault();else{if(_this.isSmooth=(_this.options.smoothTouch||_this.options.syncTouch)&&isTouch||_this.options.smoothWheel&&isWheel,!_this.isSmooth)return _this.isScrolling=!1,void _this.animate.stop();event.preventDefault();var delta=deltaY;"both"===_this.options.gestureOrientation?delta=Math.abs(deltaY)>Math.abs(deltaX)?deltaY:deltaX:"horizontal"===_this.options.gestureOrientation&&(delta=deltaX);var syncTouch=isTouch&&_this.options.syncTouch,hasTouchInertia=isTouch&&"touchend"===event.type&&Math.abs(delta)>1;hasTouchInertia&&(delta=_this.velocity*_this.options.touchInertiaMultiplier),_this.scrollTo(_this.targetScroll+delta,_extends({programmatic:!1},syncTouch&&{lerp:hasTouchInertia?_this.syncTouchLerp:_this.options.__iosNoInertiaSyncTouchLerp}))}}}},this.onNativeScroll=function(){if(!_this.__preventNextScrollEvent&&!_this.isScrolling){var lastScroll=_this.animatedScroll;_this.animatedScroll=_this.targetScroll=_this.actualScroll,_this.velocity=0,_this.direction=Math.sign(_this.animatedScroll-lastScroll),_this.emit()}},window.lenisVersion="1.0.29",wrapper!==document.documentElement&&wrapper!==document.body||(wrapper=window),this.options={wrapper:wrapper,content:content,wheelEventsTarget:wheelEventsTarget,eventsTarget:eventsTarget,smoothWheel:smoothWheel,smoothTouch:smoothTouch,syncTouch:_syncTouch,syncTouchLerp:syncTouchLerp,__iosNoInertiaSyncTouchLerp:__iosNoInertiaSyncTouchLerp,touchInertiaMultiplier:touchInertiaMultiplier,duration:duration,easing:easing,lerp:lerp,infinite:infinite,gestureOrientation:gestureOrientation,orientation:orientation,touchMultiplier:touchMultiplier,wheelMultiplier:wheelMultiplier,normalizeWheel:normalizeWheel,autoResize:autoResize},this.animate=new Animate,this.emitter=new Emitter,this.dimensions=new Dimensions({wrapper:wrapper,content:content,autoResize:autoResize}),this.toggleClass("lenis",!0),this.velocity=0,this.isLocked=!1,this.isStopped=!1,this.isSmooth=_syncTouch||smoothWheel||smoothTouch,this.isScrolling=!1,this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener("scroll",this.onNativeScroll,{passive:!1}),this.virtualScroll=new VirtualScroll(eventsTarget,{touchMultiplier:touchMultiplier,wheelMultiplier:wheelMultiplier,normalizeWheel:normalizeWheel}),this.virtualScroll.on("scroll",this.onVirtualScroll)}var _proto=Lenis.prototype;return _proto.destroy=function(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onNativeScroll,{passive:!1}),this.virtualScroll.destroy(),this.dimensions.destroy(),this.toggleClass("lenis",!1),this.toggleClass("lenis-smooth",!1),this.toggleClass("lenis-scrolling",!1),this.toggleClass("lenis-stopped",!1),this.toggleClass("lenis-locked",!1)},_proto.on=function(event,callback){return this.emitter.on(event,callback)},_proto.off=function(event,callback){return this.emitter.off(event,callback)},_proto.setScroll=function(scroll){this.isHorizontal?this.rootElement.scrollLeft=scroll:this.rootElement.scrollTop=scroll},_proto.resize=function(){this.dimensions.resize()},_proto.emit=function(){this.emitter.emit("scroll",this)},_proto.reset=function(){this.isLocked=!1,this.isScrolling=!1,this.animatedScroll=this.targetScroll=this.actualScroll,this.velocity=0,this.animate.stop()},_proto.start=function(){this.isStopped=!1,this.reset()},_proto.stop=function(){this.isStopped=!0,this.animate.stop(),this.reset()},_proto.raf=function(time){var deltaTime=time-(this.time||time);this.time=time,this.animate.advance(.001*deltaTime)},_proto.scrollTo=function(target,_temp2){var _this2=this,_ref3=void 0===_temp2?{}:_temp2,_ref3$offset=_ref3.offset,offset=void 0===_ref3$offset?0:_ref3$offset,_ref3$immediate=_ref3.immediate,immediate=void 0!==_ref3$immediate&&_ref3$immediate,_ref3$lock=_ref3.lock,lock=void 0!==_ref3$lock&&_ref3$lock,_ref3$duration=_ref3.duration,duration=void 0===_ref3$duration?this.options.duration:_ref3$duration,_ref3$easing=_ref3.easing,easing=void 0===_ref3$easing?this.options.easing:_ref3$easing,_ref3$lerp=_ref3.lerp,lerp=void 0===_ref3$lerp?!duration&&this.options.lerp:_ref3$lerp,_ref3$onComplete=_ref3.onComplete,onComplete=void 0===_ref3$onComplete?null:_ref3$onComplete,_ref3$force=_ref3.force,force=void 0!==_ref3$force&&_ref3$force,_ref3$programmatic=_ref3.programmatic,programmatic=void 0===_ref3$programmatic||_ref3$programmatic;if(!this.isStopped&&!this.isLocked||force){if(["top","left","start"].includes(target))target=0;else if(["bottom","right","end"].includes(target))target=this.limit;else{var _target,node;if("string"==typeof target?node=document.querySelector(target):null!=(_target=target)&&_target.nodeType&&(node=target),node){if(this.options.wrapper!==window){var wrapperRect=this.options.wrapper.getBoundingClientRect();offset-=this.isHorizontal?wrapperRect.left:wrapperRect.top}var rect=node.getBoundingClientRect();target=(this.isHorizontal?rect.left:rect.top)+this.animatedScroll}}if("number"==typeof target){if(target+=offset,target=Math.round(target),this.options.infinite?programmatic&&(this.targetScroll=this.animatedScroll=this.scroll):target=clamp(0,target,this.limit),immediate)return this.animatedScroll=this.targetScroll=target,this.setScroll(this.scroll),this.reset(),void(null==onComplete||onComplete(this));if(!programmatic){if(target===this.targetScroll)return;this.targetScroll=target}this.animate.fromTo(this.animatedScroll,target,{duration:duration,easing:easing,lerp:lerp,onStart:function(){lock&&(_this2.isLocked=!0),_this2.isScrolling=!0},onUpdate:function(value,completed){_this2.isScrolling=!0,_this2.velocity=value-_this2.animatedScroll,_this2.direction=Math.sign(_this2.velocity),_this2.animatedScroll=value,_this2.setScroll(_this2.scroll),programmatic&&(_this2.targetScroll=value),completed||_this2.emit(),completed&&(_this2.reset(),_this2.emit(),null==onComplete||onComplete(_this2),_this2.__preventNextScrollEvent=!0,requestAnimationFrame((function(){delete _this2.__preventNextScrollEvent})))}})}}},_proto.toggleClass=function(name,value){this.rootElement.classList.toggle(name,value),this.emitter.emit("className change",this)},_createClass(Lenis,[{key:"rootElement",get:function(){return this.options.wrapper===window?document.documentElement:this.options.wrapper}},{key:"limit",get:function(){return this.dimensions.limit[this.isHorizontal?"x":"y"]}},{key:"isHorizontal",get:function(){return"horizontal"===this.options.orientation}},{key:"actualScroll",get:function(){return this.isHorizontal?this.rootElement.scrollLeft:this.rootElement.scrollTop}},{key:"scroll",get:function(){return this.options.infinite?(n=this.animatedScroll,d=this.limit,(n%d+d)%d):this.animatedScroll;var n,d}},{key:"progress",get:function(){return 0===this.limit?1:this.scroll/this.limit}},{key:"isSmooth",get:function(){return this.__isSmooth},set:function(value){this.__isSmooth!==value&&(this.__isSmooth=value,this.toggleClass("lenis-smooth",value))}},{key:"isScrolling",get:function(){return this.__isScrolling},set:function(value){this.__isScrolling!==value&&(this.__isScrolling=value,this.toggleClass("lenis-scrolling",value))}},{key:"isStopped",get:function(){return this.__isStopped},set:function(value){this.__isStopped!==value&&(this.__isStopped=value,this.toggleClass("lenis-stopped",value))}},{key:"isLocked",get:function(){return this.__isLocked},set:function(value){this.__isLocked!==value&&(this.__isLocked=value,this.toggleClass("lenis-locked",value))}},{key:"className",get:function(){var className="lenis";return this.isStopped&&(className+=" lenis-stopped"),this.isLocked&&(className+=" lenis-locked"),this.isScrolling&&(className+=" lenis-scrolling"),this.isSmooth&&(className+=" lenis-smooth"),className}}]),Lenis}();return Lenis}));