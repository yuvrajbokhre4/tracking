$(function () {
  $("#nav-placeholder").load("/nav-bar.html"),
    $("#Footer_placeholder").load("/footer.html");
});
var name,
  email,
  text,
  formUpText = document.getElementsByClassName("footer-upperline");
function showAlert() {
  myform.reset(),
    (document.getElementById("alertBox").style.display = "block"),
    (myform.style.display = "none"),
    (formUpText[0].style.display = "none");
}
function closeAlert() {
  (document.getElementById("alertBox").style.display = "none"),
    (myform.style.display = "block"),
    (formUpText[0].style.display = "block");
}
var myform = document.getElementById("my_form");
function validateEmail(email) {
  return /\S+@\S+\.\S+/.test(email);
}
function InvalidMsg(textbox) {
  return (
    "" === textbox.value
      ? textbox.setCustomValidity("Entering an email-id is necessary!")
      : textbox.validity.typeMismatch
      ? textbox.setCustomValidity(
          "Please enter an email address which is valid!"
        )
      : textbox.setCustomValidity(""),
    !0
  );
}
myform.addEventListener("submit", function (e) {
  e.preventDefault(),
    (nameUser = myform.elements.item(0).value),
    (emailUser = myform.elements.item(1).value),
    (textUser = myform.elements.item(2).value),
    validateEmail(emailUser)
      ? ((bodytxt = `Name: <b>${nameUser} </b><br>\n Email: <b>${emailUser} </b>\n Message: <br><b>${textUser} </b>`),
        Email.send({
          Host: "smtp.elasticemail.com",
          Username: "iminfo@integramagna.com",
          Password: "F63AAC721194CFB801A7F3163DBC96920A2B",
          To: "hi@integramagna.com",
          From: "hi@integramagna.com",
          Subject: "Enquiry - Integra Magna",
          Port: 2525,
          Body: bodytxt,
        }).then((message) => showAlert()))
      : alert("Please enter a valid email address. \n" + emailUser);
});
var subscribeFrom = document.getElementById("subscribForm");
subscribeFrom.addEventListener("submit", function (e) {
  if (
    (e.preventDefault(),
    (emailUser = subscribeFrom.elements.item(0).value),
    validateEmail(emailUser))
  ) {
    (bodytxt = `Email: <b>${emailUser} </b>`),
      Email.send({
        Host: "smtp.elasticemail.com",
        Username: "iminfo@integramagna.com",
        Password: "F63AAC721194CFB801A7F3163DBC96920A2B",
        To: "hi@integramagna.com",
        From: "hi@integramagna.com",
        Subject: "Subscription - Integra Magna",
        Port: 2525,
        Body: bodytxt,
      }),
      $("#subscribForm").css("display", "none");
    var sucssMessage = $(".subs-para").data("sucess");
    $(".subs-para").html(sucssMessage);
  } else alert("Please enter a valid email address. \n" + emailUser);
});
